{"version":3,"file":"static/js/ItemsPage.4ae49340.chunk.js","mappings":"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","sources":["webpack://myproject-shop/./src/styles/ItemsPage.module.scss?bdb5","webpack://myproject-shop/./src/UI/select/MySelect.module.scss?413c","UI/select/MySelect.tsx","pages/ItemsPage.tsx","hooks/usePagination.ts","utils/pages.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ItemsPage_wrapper__htjAd\",\"container\":\"ItemsPage_container__sVIHO\",\"items__grid\":\"ItemsPage_items__grid__+kWYp\",\"items__title\":\"ItemsPage_items__title__xvQDn\",\"items__notfound\":\"ItemsPage_items__notfound__4xMdM\",\"items__filter\":\"ItemsPage_items__filter__uQ7Gk\",\"items__error\":\"ItemsPage_items__error__uF0Es\",\"items__pagination\":\"ItemsPage_items__pagination__KFMO9\",\"pagination__button\":\"ItemsPage_pagination__button__-sDOI\",\"pagination__current\":\"ItemsPage_pagination__current__-7Muz\"};","// extracted by mini-css-extract-plugin\nexport default {\"select__wrapper\":\"MySelect_select__wrapper__N--tO\",\"select\":\"MySelect_select__Yq4pF\"};","import React, { ChangeEvent } from 'react'\nimport { RateList, SortValueEnum } from '../../utils/RateList'\nimport { useAppDispatch } from '../../store/store'\nimport { setSortBy } from '../../store/slices/filterSlice'\nimport styles from './MySelect.module.scss'\ninterface MySelectProps {\n   options:RateList[],\n   defaultValue:string,\n   value:string,\n   onChange:(e:string) => void,\n}\nconst MySelect:React.FC<MySelectProps> = ({options ,defaultValue,value,onChange}) => {\n   const dispatch = useAppDispatch()\n   const handleChange = (e:ChangeEvent<HTMLSelectElement>) => {\n   onChange(e.target.value)\n   dispatch(setSortBy((e.target.value) as SortValueEnum))\n   };\n  return (\n  <div className={styles.select__wrapper}>\n   <select value={value} onChange={handleChange} className={styles.select}>\n      <option disabled value=''>{defaultValue}</option>\n       {options.map(option => \n         <option key={option.sortValue}value={option.sortValue}>{option.name}</option>)}\n   </select>\n </div>\n  )\n}\n\nexport default MySelect;","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"../styles/ItemsPage.module.scss\";\nimport { Product,Filter,Skeleton } from \"../components\";\nimport { RootState, useAppDispatch } from \"../store/store\";\nimport { useTypedSelector } from \"../hooks/useTypedSelector\";\nimport { fetchProducts} from \"../store/slices/productSlice\";\nimport MySelect from \"../UI/select/MySelect\";\nimport { ratingList } from \"../utils/RateList\";\nimport { getPageCount } from \"../utils/pages\";\nimport { usePagination } from \"../hooks/usePagination\";\nimport classNames from \"classnames\";\nimport { setPage } from \"../store/slices/filterSlice\";\nconst ItemsPage = () => {\n  const [selectedSort, setSelectedSort] = useState<string>(\"\");\n  const [totalPages, setTotalPages] = useState<number>(0);\n  let pageCountArray = usePagination(totalPages);\n  const { products, isLoading } = useTypedSelector(\n    (state: RootState) => state.productSlice\n  );\n  const { searchParams, sortValue, page } = useTypedSelector(\n    (state: RootState) => state.filterSlice\n  );\n  const dispatch = useAppDispatch();\n  const order = sortValue.includes(\"-\") ? \"ask\" : \"desc\";\n  const sorted = sortValue.replace(\"-\", \"\");\n  const lastElem = useRef<HTMLDivElement>(null);\n  // useObserver(lastElem, isLoading, page < totalPages, () => {\n  //   dispatch(setPage(page + 1));\n  // });\n  useEffect(() => {\n    const search = searchParams ? `&search=${searchParams}` : \"\";\n    dispatch(\n      fetchProducts({\n        search,\n        order,\n        sorted,\n        page,\n        limit: 8,\n      })\n    );\n  }, [searchParams, order, sorted, page]);\n  useEffect(() => {\n    setTotalPages(getPageCount(20, 8));\n  }, [products]);\n  const sortPosts = (sort: string) => {\n    setSelectedSort(sort);\n  };\n  const onChangePage = (page: number) => {\n    dispatch(setPage(page));\n  };\n  return (\n    <div className={styles.container}>\n      <div className={styles.items__filter}>\n        <Filter />\n        <MySelect\n          value={selectedSort}\n          onChange={sortPosts}\n          defaultValue=\"Sort by\"\n          options={ratingList}\n        />\n      </div>\n      <h2 data-testid='catalogue-page' className={styles.items__title}>Catalogue</h2>\n      <div className={products.length !== 0 ? styles.items__grid : \"\"}>\n        {isLoading === \"error\" ? (\n          <div className={styles.items__error}>\n            <h2> Something went wrong ðŸ˜•</h2>\n            <p>\n              {\" \"}\n              Unfortunately,during fetching occured an error. Try again later\n            </p>\n          </div>\n        ) : (\n          <>\n            {isLoading === \"loading\" &&\n             [...new Array(8)].map((_, index) => <Skeleton key={index} />)}\n            {products.map((product) => (\n              <Product product={product} key={product.id} />\n            ))}\n            {/* {products.length !== 0 && isLoading !== 'success' ? (\n          products.map((product) => (\n            <Product product={product} key={product.id} />\n          ))\n        ) : (\n          <div className={styles.items__notfound}>Items were not found</div>\n        )} */}\n          </>\n        )}\n      </div>\n      <div ref={lastElem}></div>\n      <div className={styles.items__pagination}>\n        {pageCountArray.map((p) => (\n          <span\n            onClick={() => onChangePage(p)}\n            className={\n              page === p\n                ? classNames(\n                    styles.pagination__button,\n                    styles.pagination__current\n                  )\n                : styles.pagination__button\n            }\n            key={p}\n          >\n            {p}\n          </span>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default ItemsPage;\n","import { useMemo } from \"react\";\n\nexport const usePagination = (totalPages: number) => {\n  const pageCountArray = useMemo(() => {\n    const pagesArray: number[] = [];\n    for (let i = 0; i < totalPages; i++) {\n      pagesArray.push(i + 1);\n    }\n    return pagesArray;\n  }, [totalPages]);\n  return pageCountArray;\n};\n","export const getPageCount = (totalCount: number, limit: number) => {\n  return Math.ceil(totalCount / limit);\n};\n"],"names":["_ref","options","defaultValue","value","onChange","dispatch","useAppDispatch","_jsx","className","styles","children","_jsxs","e","target","setSortBy","disabled","map","option","sortValue","name","_useState","useState","_useState2","_slicedToArray","selectedSort","setSelectedSort","_useState3","_useState4","totalPages","setTotalPages","pageCountArray","useMemo","pagesArray","i","push","usePagination","_useTypedSelector","useTypedSelector","state","productSlice","products","isLoading","_useTypedSelector2","filterSlice","searchParams","page","order","includes","sorted","replace","lastElem","useRef","useEffect","search","concat","fetchProducts","limit","totalCount","Math","ceil","Filter","MySelect","sort","ratingList","length","_Fragment","_toConsumableArray","Array","_","index","Skeleton","product","Product","id","ref","p","onClick","setPage","onChangePage","classNames"],"sourceRoot":""}